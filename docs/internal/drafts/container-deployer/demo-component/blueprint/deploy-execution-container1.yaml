deployItems:
- name: container1
  type: landscaper.gardener.cloud/container
  target:
    name: {{ index .imports "target-cluster" "metadata" "name" }}
    namespace: {{ index .imports "target-cluster" "metadata" "namespace" }}
  config:
    apiVersion: container.deployer.landscaper.gardener.cloud/v1alpha1
    kind: ProviderConfiguration

    importValues:
      word: {{ .imports.word }}
      sleepTimeBefore: {{ .imports.sleepTimeBefore }}
      sleepTimeAfter: {{ .imports.sleepTimeAfter }}

    image: dwdraju/alpine-curl-jq
    command: ["sh", "-c"]
    args:
    - |
      apk update
      apk add jq
      sleep $(cat $IMPORTS_PATH | jq .sleepTimeBefore)
      inputWord=$(cat $IMPORTS_PATH | jq .word)
      [[ ! -f $STATE_PATH/state.txt ]] && echo "" > $STATE_PATH/state.txt
      stateWord=$(cat $STATE_PATH/state.txt)
      newWord="$stateWord $inputWord"
      echo $newWord > $STATE_PATH/state.txt
      newWord=$(sed 's/"//g' $STATE_PATH/state.txt)
      echo $newWord > $STATE_PATH/state.txt
      output="{\"sentence\": \"$newWord\"}"
      echo $output > $EXPORTS_PATH
      sleep $(cat $IMPORTS_PATH | jq .sleepTimeAfter)